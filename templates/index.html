<!DOCTYPE html>
<html>
<head>
    <title>Fan Control</title>
    <style>
        body { font-family: sans-serif; padding: 2em; max-width: 600px; }
        h1 { margin-bottom: 0.5em; }
        .section { margin-top: 2em; }
        input[type=number] { width: 4em; }
        table { width: 100%; border-collapse: collapse; margin-top: 1em; }
        th, td { border: 1px solid #ccc; padding: 0.5em; text-align: center; }
        button { margin-top: 1em; }
    </style>
</head>
<body>
    <h1>Fan Controller</h1>
    <p>üå°Ô∏è CPU Temp: <strong>{{ temp }}¬∞C</strong> | üí® Fan Speed: <strong>{{ duty }}%</strong></p>

    <form method="POST" action="/">
        <div class="section">
            <label><strong>Manual Override:</strong></label>
            <input type="checkbox" name="override" {% if settings.manual_override %}checked{% endif %}>
            <br><br>
            <label>Manual Duty (%):</label>
            <input type="number" name="manual_duty" min="0" max="100" value="{{ settings.manual_duty }}">
        </div>

        <div class="section">
            <h2>Temperature Rules</h2>
            <table>
                <tr><th>Temp ‚â• (¬∞C)</th><th>Fan Speed (%)</th><th>Remove</th></tr>
                {% for rule in settings.temp_thresholds %}
                <tr>
                    <td><input type="number" name="temp_{{ loop.index0 }}" value="{{ rule.temp }}"></td>
                    <td><input type="number" name="duty_{{ loop.index0 }}" value="{{ rule.duty }}"></td>
                    <td><input type="checkbox" name="delete_{{ loop.index0 }}"></td>
                </tr>
                {% endfor %}
            </table>
            <button type="submit" name="action" value="update">Update Rules</button>
            <button type="submit" name="action" value="add">Add Rule</button>
        </div>
    </form>
</body>
</html>

